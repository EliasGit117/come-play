generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum NewsStatus {
  published
  hidden
}

model News {
  id        Int        @id @default(autoincrement())
  titleRo   String     @map("title_ro")
  titleRu   String     @map("title_ru")
  slug      String     @unique
  contentRo String?    @map("content_ro")
  contentRu String?    @map("content_ru")
  status    NewsStatus @default(hidden)
  image     NewsImage?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@index(fields: [titleRo, titleRu, slug, status])
  @@map("news")
}

model NewsImage {
  id           Int     @id @default(autoincrement())
  url          String
  thumbhash    Bytes?
  type         String
  size         Int
  originalName String? @map("original_name")
  width        Int?
  height       Int?

  newsId Int  @unique
  news   News @relation(fields: [newsId], references: [id])

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@index([newsId])
  @@map("news_images")
}
